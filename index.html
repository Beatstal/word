<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Word Guess â€“ Mini Wordle Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #1d2433 0, #050816 60%, #020617 100%);
      color: #e5e7eb;
    }

    .app {
      width: 100%;
      max-width: 480px;
      padding: 24px 16px 30px;
    }

    .card {
      background: radial-gradient(circle at top left, #111827 0, #020617 55%);
      border-radius: 28px;
      padding: 20px 20px 18px;
      border: 1px solid rgba(129, 140, 248, 0.5);
      box-shadow: 0 26px 80px rgba(15, 23, 42, 0.9);
    }

    .header {
      text-align: center;
      margin-bottom: 16px;
    }

    .logo {
      width: 64px;
      height: 64px;
      border-radius: 22px;
      margin: 0 auto 8px;
      background: conic-gradient(
        from 210deg,
        #e879f9, #818cf8, #22d3ee, #22c55e, #eab308, #f97316, #ef4444, #e879f9
      );
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 16px 40px rgba(129, 140, 248, 0.9);
    }

    .logo-inner {
      width: 48px;
      height: 48px;
      border-radius: 18px;
      background: radial-gradient(circle at 30% 20%, #111827, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 22px;
      letter-spacing: 2px;
      color: #e5e7eb;
    }

    .title {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .subtitle {
      margin-top: 4px;
      font-size: 12px;
      color: #9ca3af;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 12px;
      color: #9ca3af;
    }

    .streak {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .streak-pill {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 11px;
      color: #f9fafb;
    }

    .new-game-btn {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(147, 197, 253, 0.8);
      background: rgba(15, 23, 42, 0.9);
      color: #bfdbfe;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: background 0.15s ease, transform 0.12s ease, box-shadow 0.12s ease;
    }

    .new-game-btn:hover {
      background: rgba(30, 64, 175, 0.85);
      box-shadow: 0 10px 24px rgba(30, 64, 175, 0.8);
      transform: translateY(-1px);
    }

    /* Grid */
    .grid {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      gap: 4px;
      margin: 6px 0 10px;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 4px;
    }

    .tile {
      width: 100%;
      aspect-ratio: 1/1;
      border-radius: 8px;
      border: 1px solid #4b5563;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 700;
      text-transform: uppercase;
      color: #e5e7eb;
      background: radial-gradient(circle at top, #020617, #020617);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.7);
      transform-origin: center;
    }

    .tile.filled {
      border-color: #818cf8;
      box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.7);
    }

    .tile.reveal {
      animation: flip 0.45s ease forwards;
    }

    @keyframes flip {
      0% { transform: rotateX(0deg); }
      50% { transform: rotateX(90deg); }
      100% { transform: rotateX(0deg); }
    }

    .tile-correct {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border-color: #16a34a;
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.9);
    }

    .tile-present {
      background: linear-gradient(135deg, #eab308, #f59e0b);
      border-color: #d97706;
      box-shadow: 0 0 0 1px rgba(217, 119, 6, 0.9);
    }

    .tile-absent {
      background: linear-gradient(135deg, #111827, #020617);
      border-color: #4b5563;
      color: #6b7280;
      box-shadow: none;
    }

    .tile-pop {
      animation: pop 0.1s ease-out;
    }

    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    /* Keyboard */
    .keyboard {
      margin-top: 8px;
      user-select: none;
    }

    .kb-row {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin-bottom: 4px;
    }

    .key {
      padding: 8px 7px;
      min-width: 28px;
      border-radius: 6px;
      border: none;
      background: #111827;
      color: #e5e7eb;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.8);
      transition: background 0.1s ease, transform 0.1s ease, box-shadow 0.1s ease;
    }

    .key:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(15, 23, 42, 1);
    }

    .key:active {
      transform: translateY(0);
      box-shadow: 0 3px 7px rgba(15, 23, 42, 0.9);
    }

    .key-wide {
      font-size: 11px;
      padding: 8px 10px;
    }

    .kb-correct {
      background: #16a34a;
      color: #ecfdf5;
    }

    .kb-present {
      background: #d97706;
      color: #fffbeb;
    }

    .kb-absent {
      background: #374151;
      color: #9ca3af;
    }

    /* Message bar */
    .message-bar {
      margin-top: 6px;
      min-height: 20px;
      font-size: 12px;
      color: #e5e7eb;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .msg-text {
      color: #e5e7eb;
    }

    .msg-text.subtle {
      color: #9ca3af;
      font-size: 11px;
    }

    .msg-highlight {
      color: #facc15;
      font-weight: 500;
    }

    .hint {
      font-size: 11px;
      color: #9ca3af;
      text-align: right;
    }

    @media (max-width: 480px) {
      .card {
        padding: 18px 14px 16px;
      }
      .tile {
        font-size: 18px;
      }
      .key {
        padding: 7px 5px;
        min-width: 24px;
      }
      .key-wide {
        font-size: 10px;
        padding-inline: 6px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <header class="header">
        <div class="logo">
          <div class="logo-inner">WG</div>
        </div>
        <h1 class="title">Word Guess</h1>
        <p class="subtitle">Guess a 5-letter English word in 6 tries. Green = right letter & spot, Yellow = right letter wrong spot.</p>
      </header>

      <div class="top-bar">
        <div class="streak">
          <span class="streak-pill" id="games-pill">Games: 0</span>
          <span class="streak-pill" id="streak-pill">Streak: 0 ðŸ”¥</span>
          <span class="streak-pill" id="best-pill">Best: 0</span>
        </div>
        <button class="new-game-btn" id="new-game-btn">
          <span>New Game</span> <span>â†»</span>
        </button>
      </div>

      <main>
        <div class="grid" id="grid"></div>

        <div class="keyboard" id="keyboard">
          <div class="kb-row" data-row="1"></div>
          <div class="kb-row" data-row="2"></div>
          <div class="kb-row" data-row="3"></div>
        </div>

        <div class="message-bar">
          <div class="msg-text" id="message"></div>
          <div class="hint">Press Enter to submit â€¢ Backspace to delete</div>
        </div>

      </main>
    </div>
  </div>

  <script>
    // --------- WORD LIST (target words) ----------
    // All English, 5 letters
    const WORDS = [
      "APPLE","BRAIN","LIGHT","NIGHT","DREAM","SMILE","WORLD","HEART","PEACE","QUIET",
      "STONE","PLANT","STARS","CLOUD","SHINE","WATER","MUSIC","STORY","BRAVE","SMART",
      "CODES","DEBUG","ARRAY","LOGIC","INPUT","LOOPS","CLASS","OBJECT","STYLE","COLOR",
      "UNITY","PIXEL","LEVEL","GAMES","SCORE","HAPPY","LUCKY","MAGIC","NINJA","POWER"
    ];

    const WORD_LENGTH = 5;
    const MAX_ROWS = 6;

    let targetWord = "";
    let currentRow = 0;
    let currentCol = 0;
    let grid = [];
    let locked = false; // prevent input while animating or after game end

    // streak / stats
    let streak = 0;
    let bestStreak = 0;
    let games = 0;

    // DOM
    const gridEl = document.getElementById("grid");
    const keyboardEl = document.getElementById("keyboard");
    const messageEl = document.getElementById("message");
    const gamesPill = document.getElementById("games-pill");
    const streakPill = document.getElementById("streak-pill");
    const bestPill = document.getElementById("best-pill");
    const newGameBtn = document.getElementById("new-game-btn");

    // ----- LocalStorage for streak -----
    function loadStats() {
      const s = parseInt(localStorage.getItem("wordguess_streak") || "0", 10);
      const b = parseInt(localStorage.getItem("wordguess_bestStreak") || "0", 10);
      const g = parseInt(localStorage.getItem("wordguess_games") || "0", 10);
      streak = isNaN(s) ? 0 : s;
      bestStreak = isNaN(b) ? 0 : b;
      games = isNaN(g) ? 0 : g;
      updateStatsUI();
    }

    function saveStats() {
      localStorage.setItem("wordguess_streak", String(streak));
      localStorage.setItem("wordguess_bestStreak", String(bestStreak));
      localStorage.setItem("wordguess_games", String(games));
    }

    function updateStatsUI() {
      gamesPill.textContent = `Games: ${games}`;
      streakPill.textContent = `Streak: ${streak} ðŸ”¥`;
      bestPill.textContent = `Best: ${bestStreak}`;
    }

    // ----- Setup grid -----
    function createGrid() {
      gridEl.innerHTML = "";
      grid = [];
      for (let r = 0; r < MAX_ROWS; r++) {
        const rowEl = document.createElement("div");
        rowEl.className = "row";
        const rowTiles = [];
        for (let c = 0; c < WORD_LENGTH; c++) {
          const tile = document.createElement("div");
          tile.className = "tile";
          rowEl.appendChild(tile);
          rowTiles.push(tile);
        }
        gridEl.appendChild(rowEl);
        grid.push(rowTiles);
      }
    }

    // ----- Setup keyboard -----
    const KEY_LAYOUT = [
      "QWERTYUIOP",
      "ASDFGHJKL",
      "ZXCVBNM"
    ];

    function createKeyboard() {
      const rows = keyboardEl.querySelectorAll(".kb-row");
      KEY_LAYOUT.forEach((row, i) => {
        const rowEl = rows[i];
        rowEl.innerHTML = "";
        if (i === 2) {
          // add Enter
          const enterKey = createKey("Enter", "Enter", true);
          rowEl.appendChild(enterKey);
        }

        row.split("").forEach((ch) => {
          const key = createKey(ch, ch);
          rowEl.appendChild(key);
        });

        if (i === 2) {
          // add Backspace
          const backKey = createKey("â†", "Backspace", true);
          rowEl.appendChild(backKey);
        }
      });
    }

    function createKey(label, value, wide = false) {
      const btn = document.createElement("button");
      btn.className = "key" + (wide ? " key-wide" : "");
      btn.textContent = label;
      btn.dataset.key = value;
      btn.addEventListener("click", () => handleKey(value));
      return btn;
    }

    // ----- Game logic -----
    function chooseRandomWord() {
      const word = WORDS[Math.floor(Math.random() * WORDS.length)];
      return word.toUpperCase();
    }

    function resetGame() {
      locked = false;
      currentRow = 0;
      currentCol = 0;
      targetWord = chooseRandomWord();
      messageEl.textContent = "";
      createGrid();
      resetKeyboardColors();
      // console.log("Target:", targetWord); // debug
    }

    function resetKeyboardColors() {
      const keys = keyboardEl.querySelectorAll(".key");
      keys.forEach((k) => {
        k.classList.remove("kb-correct", "kb-present", "kb-absent");
      });
    }

    function handleKey(key) {
      if (locked) return;

      if (key === "Enter") {
        submitGuess();
        return;
      }
      if (key === "Backspace") {
        deleteLetter();
        return;
      }

      if (/^[a-zA-Z]$/.test(key)) {
        addLetter(key.toUpperCase());
      }
    }

    function addLetter(letter) {
      if (currentCol >= WORD_LENGTH || currentRow >= MAX_ROWS) return;
      const tile = grid[currentRow][currentCol];
      tile.textContent = letter;
      tile.classList.add("filled", "tile-pop");
      setTimeout(() => tile.classList.remove("tile-pop"), 100);
      currentCol++;
    }

    function deleteLetter() {
      if (currentCol === 0) return;
      currentCol--;
      const tile = grid[currentRow][currentCol];
      tile.textContent = "";
      tile.classList.remove("filled", "tile-pop");
    }

    function submitGuess() {
      if (currentCol < WORD_LENGTH) {
        showMessage("Not enough letters");
        return;
      }

      const guess = grid[currentRow]
        .map((tile) => tile.textContent)
        .join("");

      // Simple check: must be English letters, length already ensured
      if (!/^[A-Z]{5}$/.test(guess)) {
        showMessage("Invalid guess");
        return;
      }

      locked = true;
      revealGuess(guess);
    }

    function revealGuess(guess) {
      const upperTarget = targetWord;
      const tiles = grid[currentRow];

      // Wordle-style check (handle duplicates)
      const result = Array(WORD_LENGTH).fill("absent");
      const targetLetters = upperTarget.split("");
      const used = Array(WORD_LENGTH).fill(false);

      // First pass: correct position
      for (let i = 0; i < WORD_LENGTH; i++) {
        if (guess[i] === upperTarget[i]) {
          result[i] = "correct";
          used[i] = true;
        }
      }

      // Second pass: present but wrong position
      for (let i = 0; i < WORD_LENGTH; i++) {
        if (result[i] === "correct") continue;
        const ch = guess[i];
        let foundIndex = -1;
        for (let j = 0; j < WORD_LENGTH; j++) {
          if (!used[j] && targetLetters[j] === ch) {
            foundIndex = j;
            break;
          }
        }
        if (foundIndex !== -1) {
          result[i] = "present";
          used[foundIndex] = true;
        }
      }

      // Animate reveal tiles
      result.forEach((status, i) => {
        const tile = tiles[i];
        setTimeout(() => {
          tile.classList.add("reveal");
          tile.addEventListener(
            "animationend",
            () => {
              tile.classList.remove("reveal");
              tile.classList.remove("tile-correct", "tile-present", "tile-absent");
              if (status === "correct") tile.classList.add("tile-correct");
              else if (status === "present") tile.classList.add("tile-present");
              else tile.classList.add("tile-absent");
            },
            { once: true }
          );
        }, i * 120);
      });

      // Update keyboard colors
      setTimeout(() => {
        updateKeyboard(guess, result);
        finishRow(guess, result);
      }, WORD_LENGTH * 130);
    }

    function updateKeyboard(guess, result) {
      for (let i = 0; i < WORD_LENGTH; i++) {
        const ch = guess[i];
        const status = result[i];
        const keyBtn = keyboardEl.querySelector(`.key[data-key="${ch}"]`);
        if (!keyBtn) return;

        // Priority: correct > present > absent
        if (status === "correct") {
          keyBtn.classList.remove("kb-present", "kb-absent");
          keyBtn.classList.add("kb-correct");
        } else if (status === "present") {
          if (!keyBtn.classList.contains("kb-correct")) {
            keyBtn.classList.remove("kb-absent");
            keyBtn.classList.add("kb-present");
          }
        } else {
          if (
            !keyBtn.classList.contains("kb-correct") &&
            !keyBtn.classList.contains("kb-present")
          ) {
            keyBtn.classList.add("kb-absent");
          }
        }
      }
    }

    function finishRow(guess, result) {
      const isWin = guess === targetWord;
      if (isWin) {
        games++;
        streak++;
        if (streak > bestStreak) bestStreak = streak;
        saveStats();
        updateStatsUI();
        showMessage(`Nice! You guessed "${targetWord}".`, true);
        locked = true;
        return;
      }

      currentRow++;
      currentCol = 0;

      if (currentRow >= MAX_ROWS) {
        // lose
        games++;
        streak = 0;
        saveStats();
        updateStatsUI();
        showMessage(`The word was "${targetWord}".`, true);
        locked = true;
      } else {
        locked = false;
        showMessage("Keep going...");
      }
    }

    function showMessage(text, highlight = false) {
      messageEl.textContent = text;
      if (highlight) {
        messageEl.classList.add("msg-highlight");
      } else {
        messageEl.classList.remove("msg-highlight");
      }
    }

    // Keyboard events
    window.addEventListener("keydown", (e) => {
      if (e.ctrlKey || e.metaKey || e.altKey) return;
      const key = e.key;
      if (key === "Enter" || key === "Backspace") {
        e.preventDefault();
        handleKey(key);
      } else if (/^[a-zA-Z]$/.test(key)) {
        handleKey(key.toUpperCase());
      }
    });

    newGameBtn.addEventListener("click", () => {
      resetGame();
      showMessage("New round, good luck!");
    });

    // Init
    createGrid();
    createKeyboard();
    loadStats();
    resetGame();
  </script>
</body>
</html>
